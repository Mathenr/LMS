<html>
<head>
	<meta charset = "UTF-8">
	<title> Trabalho 03 - Mateus Henrique</title>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">

	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>

</head>
<body style = "background-color: #eee;">

	<!-- Dropdown Structure -->
	<ul id="dropdown1" class="dropdown-content" style='padding: 15px !important; margin-left: -50px;'> <span id = "cart" class="black-text text-darken-2">
		<button class="btn waves-effect waves-light" type="submit" onclick="window.location = 'finish.html'">Comprar</button>
	</span></ul>
	<nav>
		<div class="nav-wrapper teal lighten-2" style = "padding: 0 15px;">
			<a href="#!" class="brand-logo">Loja Mofada</a>
			<ul class="right hide-on-med-and-down">
				<li><a class="dropdown-button" href="#!" data-activates="dropdown1"><i class="material-icons right">shopping_cart</i><i class="material-icons right">arrow_drop_down</i></a></li>
			</ul>
		</div>
	</nav>


	<div class="row">
		<div class="col s4">
			<div class="card small">
				<div class="card-image">
					<img src="animal.jpg">
					<span class="card-title">Kesha - Animal (CD), R$ 12</span>
				</div>
				<div class="card-content animal">
					<form style = "display: flex; justify-content: space-between; flex-wrap: wrap;">

						<input type = "number" class = "qntd" placeholder="Quantidade" style = "width: 100%; margin-top: -20px;" maxlength="10">

						<button class="btn waves-effect waves-light" type="submit" name="action" value = "item1">Adicionar ao saco
							<i class="material-icons right">attach_money</i>
						</button>

					</form>
				</div>
			</div>
		</div>

		<div class="col s4">
			<div class="card small">
				<div class="card-image">
					<img src="cannibal.jpg">
					<span class="card-title">Kesha - Cannibal (CD), R$ 10</span>
				</div>
				<div class="card-content cannibal">
					<form style = "display: flex; justify-content: space-between; flex-wrap: wrap;">

						<input type = "number" class = "qntd" placeholder="Quantidade" style = "width: 100%; margin-top: -20px;" maxlength="10">

						<button class="btn waves-effect waves-light" type="submit" name="action" value = "item2">Adicionar ao saco
							<i class="material-icons right">attach_money</i>
						</button>

					</form>
				</div>
			</div>
		</div>

		<div class="col s4">
			<div class="card small">
				<div class="card-image">
					<img src="rainbow.png">
					<span class="card-title">Kesha - Rainbow (CD), R$ 17</span>
				</div>
				<div class="card-content animal">
					<form style = "display: flex; justify-content: space-between; flex-wrap: wrap;">

						<input type = "number" class = "qntd" placeholder="Quantidade" style = "width: 100%; margin-top: -20px;" maxlength="10">

						<button class="btn waves-effect waves-light" type="submit" name="action" value = "item3">Adicionar ao saco
							<i class="material-icons right">attach_money</i>
						</button>

					</form>
				</div>
			</div>
		</div>

		
	</div>

	<script>

		let cart = [];

		let item1 = {
			name: "CD - Animal",
			price: 12,
			qntd: "0"
		};

		let item2 = {
			name: "CD - Cannibal",
			price: 10,
			qntd: "0"
		};

		let item3 = {
			name: "CD - Rainbow",
			price: 17,
			qntd: "0"
		};

		$("button").click(function() {

			event.preventDefault();

			var li = $(this).parent();

			var quantity = $(li).find('input[type=number]').val();

			eval($(this).val()).qntd = quantity;

			cart.push(eval($(this).val()));

			localStorage.setItem(cart, JSON.stringify(cart));

			console.log("preço:" + JSON.parse((localStorage.getItem(cart))));

			$('#cart').prepend('<p> Item:' + eval($(this).val()).name + '<br> Preço: R$ ' + eval($(this).val()).price + '<br> Quantidade: ' + eval($(this).val()).qntd + '</p> <hr>');

		});

		$.ajax({
			type: 'GET',
			url: 'http://rest.learncode.academy/api/learncode/kesha/',
			success: function(data) {
			}
		});

		$('.dropdown-button').dropdown({
			inDuration: 300,
			outDuration: 225,
      constrainWidth: false, // Does not change width of dropdown to that of the activator
      hover: true, // Activate on hover
      gutter: 0, // Spacing from edge
      belowOrigin: true, // Displays dropdown below the button
      alignment: 'left', // Displays dropdown with edge aligned to the left of button
      stopPropagation: false // Stops event propagation
  }
  );

/*
		var x = {
			"name": "oi"
		}

		$('.a').append($("<div class = 'x'>" + x.name + "</div>"));

		*/

	</script>
</body>
</html>